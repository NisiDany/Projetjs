<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Projet DHTML</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.13.2/jquery-ui.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.13.2/themes/ui-lightness/jquery-ui.min.css">
    <style>
        /* Palette moderne et douce */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', 'Arial', sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: #22223b;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 4px 24px 0 rgba(60, 72, 88, 0.07);
            margin-bottom: 24px;
            padding: 20px;
            text-align: center;
        }

        .header h1 {
            color: #6366f1;
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 1px 1px 2px #e0e7ef;
        }

        .main-layout {
            display: flex;
            gap: 20px;
            min-height: 70vh;
        }

        .sidebar {
            width: 200px;
            background: #f3f4f6;
            border-radius: 16px;
            box-shadow: 0 2px 8px 0 rgba(60, 72, 88, 0.07);
            padding: 20px 10px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            position: sticky;
            top: 20px;
            height: fit-content;
        }

        .menu-item {
            display: flex;
            align-items: center;
            justify-content: flex-start;
            gap: 8px;
            width: 100%;
            padding: 12px 15px;
            background: linear-gradient(45deg, #6366f1, #06b6d4);
            color: #fff;
            text-decoration: none;
            border-radius: 10px;
            border: none;
            margin-bottom: 4px;
            cursor: pointer;
            font-size: 16px;
            transition: background 0.2s, box-shadow 0.2s;
            text-align: left;
        }

        .menu-item svg {
            width: 20px;
            height: 20px;
        }

        .menu-item:hover {
            background: linear-gradient(45deg, #818cf8, #22d3ee);
            box-shadow: 0 2px 8px #a5b4fc44;
        }

        .menu-item.active {
            background: linear-gradient(45deg, #10b981, #6366f1);
            color: #fff;
        }

        .content-area {
            flex: 1;
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 4px 24px 0 rgba(60, 72, 88, 0.07);
            padding: 30px;
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        .page h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        /* Styles pour Cramer */
        .equation {
            margin-bottom: 12px;
            font-size: 18px;
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: 6px;
        }

        .equation input[type="number"] {
            width: 60px;
            padding: 6px;
            border: 2px solid #ddd;
            border-radius: 8px;
            text-align: center;
            font-size: 14px;
            box-sizing: border-box;
        }

        /* Styles pour Image */
        .image-container {
            text-align: center;
            margin-bottom: 30px;
        }

        .resizable-image {
            max-width: 100%;
            border: 2px solid #ddd;
            border-radius: 10px;
        }

        .slider-container {
            margin: 20px 0;
        }

        .slider-container label {
            display: block;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .slider {
            margin-bottom: 10px;
        }

        .slider-value {
            display: inline-block;
            margin-left: 10px;
            font-weight: bold;
            color: #6c5ce7;
        }

        /* Styles pour Panneau */
        .billboard {
            width: 500px;
            height: 300px;
            margin: 20px auto;
            position: relative;
            border: 2px solid #6366f1;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            background: #f3f4f6;
        }

        .layer {
            position: absolute;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
            color: white;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            opacity: 0;
            transform: scale(0.8) rotate(5deg);
            transition: all 1s ease-in-out;
        }

        .layer.active {
            opacity: 1;
            transform: scale(1) rotate(0deg);
        }

        .layer1 {
            background: linear-gradient(45deg, #6366f1, #818cf8);
        }

        .layer2 {
            background: linear-gradient(45deg, #06b6d4, #22d3ee);
        }

        .layer3 {
            background: linear-gradient(45deg, #10b981, #34d399);
        }

        .layer4 {
            background: linear-gradient(45deg, #f59e42, #fbbf24);
        }

        .billboard-controls {
            text-align: center;
            margin-top: 20px;
        }

        .control-btn {
            background: linear-gradient(45deg, #2d3436, #636e72);
            color: white;
            padding: 10px 20px;
            margin: 0 5px;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .control-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        /* Styles pour Datatable Produits */
        .products-container {
            background: #f9fafb;
            border-radius: 16px;
            box-shadow: 0 2px 8px 0 rgba(60, 72, 88, 0.07);
            padding: 20px;
            margin-bottom: 20px;
        }

        .products-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .products-table thead tr th {
            background: #6366f1;
            color: #fff;
            padding: 12px 10px;
        }

        .products-table tfoot tr {
            background: #06b6d4;
            color: #fff;
        }

        .products-table td {
            color: #22223b;
            padding: 12px 10px;
        }

        .products-table input {
            background: transparent !important;
        }

        .products-table tbody tr:nth-child(odd) {
            background: #f3f4f6;
        }

        .products-table tbody tr:nth-child(even) {
            background: #fff;
        }

        .products-table input {
            width: 100%;
            padding: 8px;
            border: 1px solid #d1d5db;
            border-radius: 4px;
            text-align: center;
        }

        .total-row {
            background: #6366f1 !important;
            color: #fff !important;
            font-weight: bold;
        }

        .add-product-btn {
            background: linear-gradient(90deg, #6366f1 60%, #06b6d4 100%);
            color: #fff;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            margin-bottom: 20px;
            font-size: 16px;
            padding: 10px 20px;
            transition: background 0.2s;
        }

        .add-product-btn:hover {
            background: linear-gradient(90deg, #818cf8 60%, #22d3ee 100%);
        }

        .calculations-section {
            background: #e0f2fe;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .calculations-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .calc-field {
            display: flex;
            flex-direction: column;
        }

        .calc-field label {
            margin-bottom: 5px;
            font-weight: bold;
        }

        .calc-field input {
            padding: 10px;
            border: none;
            border-radius: 5px;
            background: #dbeafe;
            color: #22223b;
            text-align: center;
        }

        .graph-btn {
            background: linear-gradient(90deg, #6366f1 60%, #06b6d4 100%);
            color: #fff;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            display: block;
            margin: 0 auto;
            padding: 15px 30px;
            transition: background 0.2s;
        }

        .graph-btn:hover {
            background: linear-gradient(90deg, #818cf8 60%, #22d3ee 100%);
        }

        .chart-container {
            background: #f1f5f9;
            border-radius: 10px;
            margin-top: 20px;

        }

        .chart-container h3 {
            text-align: center;
            color: #1f2937;
            margin-bottom: 20px;
        }

        .footer {
            margin-top: 30px;
            text-align: center;
            background: #f3f4f6;
            color: #6366f1;
            border-radius: 16px;
            box-shadow: 0 2px 8px 0 rgba(60, 72, 88, 0.07);
            padding: 20px;
        }

        .footer h3 {
            color: #2c3e50;
        }

        .delete-btn {
            background: none;
            border: none;
            cursor: pointer;
            padding: 2px;
            border-radius: 4px;
            transition: background 0.2s;
        }

        .delete-btn:hover {
            background: #fee2e2;
        }

        .edit-btn {
            background: none;
            border: none;
            cursor: pointer;
            padding: 2px;
            border-radius: 4px;
            transition: background 0.2s;
            margin-right: 4px;
        }

        .edit-btn:hover {
            background: #e0e7ef;
        }

        /* Colorier l'en-tête */
        .products-table thead tr th {
            background: #6366f1;
            color: #fff;
        }

        /* Colorier le pied de page */
        .products-table tfoot tr {
            background: #06b6d4;
            color: #fff;
        }

        /* Lignes impaires */
        .products-table tbody tr:nth-child(odd) {
            background: #eeeded;
        }

        /* Lignes paires */
        .products-table tbody tr:nth-child(even) {
            background: #fff;
        }

        .solve-btn {
            background: linear-gradient(90deg, #6366f1 60%, #06b6d4 100%);
            color: #fff;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 18px;
            padding: 12px 32px;
            margin: 20px 0 10px 0;
            font-weight: bold;
            letter-spacing: 1px;
            box-shadow: 0 2px 8px #a5b4fc44;
            transition: background 0.2s, transform 0.2s;
        }

        .solve-btn:hover {
            background: linear-gradient(90deg, #818cf8 60%, #22d3ee 100%);
            transform: translateY(-2px) scale(1.03);
            box-shadow: 0 4px 16px #6366f144;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <h1>PROJET DHTML</h1>
            <p>Application Web Interactive</p>
        </div>

        <div class="main-layout">
            <div class="sidebar">
                <button class="menu-item active" onclick="showPage('cramer')" style="margin-top: 0;">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                        stroke="currentColor" width="20" height="20">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M15.75 15.75V18m-7.5-6.75h.008v.008H8.25v-.008Zm0 2.25h.008v.008H8.25V13.5Zm0 2.25h.008v.008H8.25v-.008Zm0 2.25h.008v.008H8.25V18Zm2.498-6.75h.007v.008h-.007v-.008Zm0 2.25h.007v.008h-.007V13.5Zm0 2.25h.007v.008h-.007v-.008Zm0 2.25h.007v.008h-.007V18Zm2.504-6.75h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V13.5Zm0 2.25h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V18Zm2.498-6.75h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V13.5ZM8.25 6h7.5v2.25h-7.5V6ZM12 2.25c-1.892 0-3.758.11-5.593.322C5.307 2.7 4.5 3.65 4.5 4.757V19.5a2.25 2.25 0 0 0 2.25 2.25h10.5a2.25 2.25 0 0 0 2.25-2.25V4.757c0-1.108-.806-2.057-1.907-2.185A48.507 48.507 0 0 0 12 2.25Z" />
                    </svg>
                    Cramer
                </button>
                <button class="menu-item" onclick="showPage('image')">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                        stroke="currentColor" width="20" height="20">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z" />
                    </svg>
                    Image
                </button>
                <button class="menu-item" onclick="showPage('panneau')">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                        stroke="currentColor" class="size-6">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M2.25 7.125C2.25 6.504 2.754 6 3.375 6h6c.621 0 1.125.504 1.125 1.125v3.75c0 .621-.504 1.125-1.125 1.125h-6a1.125 1.125 0 0 1-1.125-1.125v-3.75ZM14.25 8.625c0-.621.504-1.125 1.125-1.125h5.25c.621 0 1.125.504 1.125 1.125v8.25c0 .621-.504 1.125-1.125 1.125h-5.25a1.125 1.125 0 0 1-1.125-1.125v-8.25ZM3.75 16.125c0-.621.504-1.125 1.125-1.125h5.25c.621 0 1.125.504 1.125 1.125v2.25c0 .621-.504 1.125-1.125 1.125h-5.25a1.125 1.125 0 0 1-1.125-1.125v-2.25Z" />
                    </svg>

                    Panneau
                </button>
                <button class="menu-item" onclick="showPage('datatable')">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                        stroke="currentColor" width="20" height="20">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125" />
                    </svg>
                    Datatable
                </button>
            </div>

            <div class="content-area">
                <!-- Page Cramer -->
                <div id="cramer" class="page active">
                    <h2> Résolution par la méthode de Cramer</h2>
                    <p>Résoudre un système d'équations linéaires à 3 inconnues :</p>

                    <div style="margin: 20px 0;">
                        <p><strong>Système :</strong></p>

                        <div class="equation" style="margin-top: 20px;">
                            <input type="number" id="a11" placeholder="A₁₁">x +
                            <input type="number" id="a12" placeholder="A₁₂">y +
                            <input type="number" id="a13" placeholder="A₁₃">z =
                            <input type="number" id="b1" placeholder="B₁">
                        </div>

                        <div class="equation">
                            <input type="number" id="a21" placeholder="A₂₁">x +
                            <input type="number" id="a22" placeholder="A₂₂">y +
                            <input type="number" id="a23" placeholder="A₂₃">z =
                            <input type="number" id="b2" placeholder="B₂">
                        </div>

                        <div class="equation">
                            <input type="number" id="a31" placeholder="A₃₁">x +
                            <input type="number" id="a32" placeholder="A₃₂">y +
                            <input type="number" id="a33" placeholder="A₃₃">z =
                            <input type="number" id="b3" placeholder="B₃">
                        </div>
                    </div>


                    <button class="solve-btn" onclick="solveCramer()">RÉSOUDRE</button>

                    <div id="cramer-result" class="result" style="display: none;"></div>
                </div>


                <!-- Page Image -->
                <div id="image" class="page">
                    <h2> Redimensionneur d'image</h2>
                    <p>Ajustez les dimensions de l'image avec les curseurs ci-dessous :</p>

                    <div class="upload-section" style="margin-bottom: 20px;">
                        <input type="file" id="imageUpload" accept="image/*" style="display: none;">
                        <button class="menu-item" onclick="document.getElementById('imageUpload').click()"
                            style="margin-top: 20px;width: auto; padding: 12px 20px;">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                                stroke="currentColor" class="size-6">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                    d="M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5" />
                            </svg>
                            Uploader une image
                        </button>
                        <p id="fileName" style="font-style: italic; color: #666;"></p>
                    </div>

                    <div class="image-container">
                        <img id="resizable-img" class="resizable-image"
                            src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZGVmcz4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0iZ3JhZCIgeDE9IjAlIiB5MT0iMCUiIHgyPSIxMDAlIiB5Mj0iMTAwJSI+CiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiM3NGI5ZmY7c3RvcC1vcGFjaXR5OjEiIC8+CiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3R5bGU9InN0b3AtY29sb3I6IzZjNWNlNztzdG9wLW9wYWNpdHk6MSIgLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgPC9kZWZzPgogIDxyZWN0IHdpZHRoPSI0MDAiIGhlaWdodD0iMzAwIiBmaWxsPSJ1cmwoI2dyYWQpIiAvPgogIDx0ZXh0IHg9IjIwMCIgeT0iMTUwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMjQiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5JbWFnZSBkZSBkw6ltb25zdHJhdGlvbjwvdGV4dD4KPC9zdmc+"
                            alt="Image de démonstration">
                    </div>

                    <div class="slider-container">
                        <label for="width-slider">Largeur: <span id="width-value"
                                class="slider-value">400px</span></label>
                        <div id="width-slider" class="slider"></div>
                    </div>

                    <div class="slider-container">
                        <label for="height-slider">Hauteur: <span id="height-value"
                                class="slider-value">300px</span></label>
                        <div id="height-slider" class="slider"></div>
                    </div>
                </div>

                <!-- Page Panneau -->
                <div id="panneau" class="page">
                    <h2>Panneau publicitaire animé</h2>
                    <p>Panneau avec rotation automatique de couches superposées :</p>

                    <div class="billboard" id="billboard">
                        <div class="layer layer1 active">🚀 Innovation Technologique</div>
                        <div class="layer layer2">💡 Solutions Créatives</div>
                        <div class="layer layer3">🌟 Excellence & Qualité</div>
                        <div class="layer layer4">🎯 Résultats Garantis</div>
                    </div>

                    <div class="billboard-controls">
                        <button class="control-btn" onclick="stopRotation()">⏸️ Pause</button>
                        <button class="control-btn" onclick="startRotation()">▶️ Reprendre</button>
                        <button class="control-btn" onclick="nextLayer()">⏭️ Suivant</button>
                    </div>

                    <div class="banner-options"
                        style="margin-top: 30px; background: rgba(255,255,255,0.9); padding: 20px; border-radius: 10px;">
                        <h3>Banner Options</h3>

                        <div class="option-group" style="margin-bottom: 15px;">
                            <label style="display: block; margin-bottom: 5px; font-weight: bold;">Animation
                                Speed:</label>
                            <input type="range" id="speedSlider" min="1000" max="5000" step="500" value="3000"
                                style="width: 100%; max-width: 300px;">
                            <span id="speedValue" style="margin-left: 10px;">3s</span>
                        </div>

                    </div>
                </div>

                <!-- Page Datatable -->
                <div id="datatable" class="page">
                    <h2>📊 Liste des Produits</h2>
                    <p>Une page permettant de construire un objet DataTable de jQuery pour afficher un ensemble des
                        produits au nombre de 10 au maximum représentés dans un tableau HTML comme suit :</p>

                    <div class="products-container">
                        <button class="add-product-btn" onclick="addProduct()">AJOUTER PRODUIT</button>

                        <!-- Barre de recherche pour la désignation -->
                        <div style="margin-bottom: 15px; display: flex; align-items: center; gap: 8px;">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                                stroke="#6c5ce7" width="22" height="22" style="flex-shrink:0;">
                                <circle cx="11" cy="11" r="7" stroke="currentColor" stroke-width="2" fill="none" />
                                <line x1="16.5" y1="16.5" x2="21" y2="21" stroke="currentColor" stroke-width="2"
                                    stroke-linecap="round" />
                            </svg>
                            <input type="text" id="searchDesignation" placeholder="Rechercher un produit."
                                style="width: 250px; padding: 8px; border-radius: 6px; border: 1px solid #ccc;">
                        </div>

                        <table class="products-table" id="productsTable">
                            <thead>
                                <tr>
                                    <th>Désignation</th>
                                    <th>Quantité</th>
                                    <th>Prix</th>
                                    <th>Montant</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody id="productsBody">
                                <tr>
                                    <td><input type="text" value="Riz" onchange="updateRow(this)" readonly></td>
                                    <td><input type="number" value="10" min="0" onchange="updateRow(this)" readonly>
                                    </td>
                                    <td><input type="number" value="4000" min="0" onchange="updateRow(this)" readonly>
                                    </td>
                                    <td>40000 Ar</td>
                                    <td>
                                        <button onclick="editProduct(this)" class="edit-btn" title="Éditer">
                                            <svg width="18" height="18" viewBox="0 0 20 20" fill="none">
                                                <path
                                                    d="M15.232 5.232l-10 10V17h1.768l10-10-1.768-1.768zM17.414 3.586a2 2 0 0 0-2.828 0l-1.172 1.172 2.828 2.828 1.172-1.172a2 2 0 0 0 0-2.828z"
                                                    stroke="#2563eb" stroke-width="2" stroke-linecap="round"
                                                    stroke-linejoin="round" />
                                            </svg>
                                        </button>
                                        <button onclick="removeProduct(this)" class="delete-btn" title="Supprimer">
                                            <svg width="18" height="18" viewBox="0 0 20 20" fill="none">
                                                <path
                                                    d="M6 8V14M10 8V14M14 8V14M4 6H16M8 6V4H12V6M5 6V16C5 17.1 5.9 18 7 18H13C14.1 18 15 17.1 15 16V6"
                                                    stroke="#dc2626" stroke-width="2" stroke-linecap="round"
                                                    stroke-linejoin="round" />
                                            </svg>
                                        </button>
                                    </td>
                                </tr>
                                <tr>
                                    <td><input type="text" value="Manioc" onchange="updateRow(this)" readonly></td>
                                    <td><input type="number" value="20" min="0" onchange="updateRow(this)" readonly>
                                    </td>
                                    <td><input type="number" value="3000" min="0" onchange="updateRow(this)" readonly>
                                    </td>
                                    <td>60000 Ar</td>
                                    <td>
                                        <button onclick="editProduct(this)" class="edit-btn" title="Éditer">
                                            <svg width="18" height="18" viewBox="0 0 20 20" fill="none">
                                                <path
                                                    d="M15.232 5.232l-10 10V17h1.768l10-10-1.768-1.768zM17.414 3.586a2 2 0 0 0-2.828 0l-1.172 1.172 2.828 2.828 1.172-1.172a2 2 0 0 0 0-2.828z"
                                                    stroke="#2563eb" stroke-width="2" stroke-linecap="round"
                                                    stroke-linejoin="round" />
                                            </svg>
                                        </button>
                                        <button onclick="removeProduct(this)" class="delete-btn" title="Supprimer">
                                            <svg width="18" height="18" viewBox="0 0 20 20" fill="none">
                                                <path
                                                    d="M6 8V14M10 8V14M14 8V14M4 6H16M8 6V4H12V6M5 6V16C5 17.1 5.9 18 7 18H13C14.1 18 15 17.1 15 16V6"
                                                    stroke="#dc2626" stroke-width="2" stroke-linecap="round"
                                                    stroke-linejoin="round" />
                                            </svg>
                                        </button>
                                    </td>
                                </tr>
                                <tr>
                                    <td><input type="text" value="Sucre" onchange="updateRow(this)" readonly></td>
                                    <td><input type="number" value="50" min="0" onchange="updateRow(this)" readonly>
                                    </td>
                                    <td><input type="number" value="1000" min="0" onchange="updateRow(this)" readonly>
                                    </td>
                                    <td>50000 Ar</td>
                                    <td>
                                        <button onclick="editProduct(this)" class="edit-btn" title="Éditer">
                                            <svg width="18" height="18" viewBox="0 0 20 20" fill="none">
                                                <path
                                                    d="M15.232 5.232l-10 10V17h1.768l10-10-1.768-1.768zM17.414 3.586a2 2 0 0 0-2.828 0l-1.172 1.172 2.828 2.828 1.172-1.172a2 2 0 0 0 0-2.828z"
                                                    stroke="#2563eb" stroke-width="2" stroke-linecap="round"
                                                    stroke-linejoin="round" />
                                            </svg>
                                        </button>
                                        <button onclick="removeProduct(this)" class="delete-btn" title="Supprimer">
                                            <svg width="18" height="18" viewBox="0 0 20 20" fill="none">
                                                <path
                                                    d="M6 8V14M10 8V14M14 8V14M4 6H16M8 6V4H12V6M5 6V16C5 17.1 5.9 18 7 18H13C14.1 18 15 17.1 15 16V6"
                                                    stroke="#dc2626" stroke-width="2" stroke-linecap="round"
                                                    stroke-linejoin="round" />
                                            </svg>
                                        </button>
                                    </td>
                                </tr>
                                <tr>
                                    <td><input type="text" value="Patate" onchange="updateRow(this)" readonly></td>
                                    <td><input type="number" value="40" min="0" onchange="updateRow(this)" readonly>
                                    </td>
                                    <td><input type="number" value="500" min="0" onchange="updateRow(this)" readonly>
                                    </td>
                                    <td>20000 Ar</td>
                                    <td>
                                        <button onclick="editProduct(this)" class="edit-btn" title="Éditer">
                                            <svg width="18" height="18" viewBox="0 0 20 20" fill="none">
                                                <path
                                                    d="M15.232 5.232l-10 10V17h1.768l10-10-1.768-1.768zM17.414 3.586a2 2 0 0 0-2.828 0l-1.172 1.172 2.828 2.828 1.172-1.172a2 2 0 0 0 0-2.828z"
                                                    stroke="#2563eb" stroke-width="2" stroke-linecap="round"
                                                    stroke-linejoin="round" />
                                            </svg>
                                        </button>
                                        <button onclick="removeProduct(this)" class="delete-btn" title="Supprimer">
                                            <svg width="18" height="18" viewBox="0 0 20 20" fill="none">
                                                <path
                                                    d="M6 8V14M10 8V14M14 8V14M4 6H16M8 6V4H12V6M5 6V16C5 17.1 5.9 18 7 18H13C14.1 18 15 17.1 15 16V6"
                                                    stroke="#dc2626" stroke-width="2" stroke-linecap="round"
                                                    stroke-linejoin="round" />
                                            </svg>
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                            <tfoot>
                                <tr class="total-row">
                                    <td>TOTAL</td>
                                    <td id="totalQuantity">120</td>
                                    <td></td>
                                    <td id="totalAmount">170000 Ar</td>
                                    <td></td>
                                </tr>
                            </tfoot>
                        </table>

                        <div class="calculations-section">
                            <div class="calculations-grid">
                                <div class="calc-field">
                                    <label>Prix moyen :</label>
                                    <input type="text" id="avgPrice" value="2125 Ar" readonly>
                                </div>
                                <div class="calc-field">
                                    <label>Prix minimal :</label>
                                    <input type="text" id="minPrice" value="500 Ar" readonly>
                                </div>
                                <div class="calc-field">
                                    <label>Prix maximal :</label>
                                    <input type="text" id="maxPrice" value="4000 Ar" readonly>
                                </div>
                            </div>


                        </div>

                        <div class="chart-container" id="chartContainer">
                            <h3>GRAPHIQUE DES PRODUITS</h3>
                            <canvas id="productsChart" width="400" height="200"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="footer">
            <h3>Auteurs :</h3>
            <p>Projet DHTML - Application Web Interactive</p>
        </div>
    </div>



    <script>
        // Variables globales
        let rotationInterval;
        let currentLayer = 0;
        let productsChart = null;
        let rotationSpeed = 3000;

        // Fonction pour afficher une page
        function showPage(pageId) {
            // Masquer toutes les pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });

            // Retirer la classe active de tous les boutons
            document.querySelectorAll('.menu-item').forEach(btn => {
                btn.classList.remove('active');
            });

            // Afficher la page sélectionnée
            document.getElementById(pageId).classList.add('active');

            // Ajouter la classe active au bouton correspondant
            event.target.classList.add('active');

            // Si on affiche la datatable, on met à jour le graphique
            if (pageId === 'datatable') {
                updateTotals(); // Cela va aussi appeler updateChart()
            }
        }
        // Recherche sur la désignation
        document.addEventListener('DOMContentLoaded', function () {
            const searchInput = document.getElementById('searchDesignation');
            if (searchInput) {
                searchInput.addEventListener('input', function () {
                    const filter = this.value.toLowerCase();
                    const rows = document.querySelectorAll('#productsBody tr');
                    rows.forEach(row => {
                        const designationInput = row.querySelector('td:first-child input');
                        if (designationInput) {
                            const designation = designationInput.value.toLowerCase();
                            row.style.display = designation.includes(filter) ? '' : 'none';
                        }
                    });
                });
            }
        });
        // Fonction pour résoudre le système par Cramer
        function solveCramer() {
            // Récupérer les coefficients
            const a11 = parseFloat(document.getElementById('a11').value) || 0;
            const a12 = parseFloat(document.getElementById('a12').value) || 0;
            const a13 = parseFloat(document.getElementById('a13').value) || 0;
            const b1 = parseFloat(document.getElementById('b1').value) || 0;

            const a21 = parseFloat(document.getElementById('a21').value) || 0;
            const a22 = parseFloat(document.getElementById('a22').value) || 0;
            const a23 = parseFloat(document.getElementById('a23').value) || 0;
            const b2 = parseFloat(document.getElementById('b2').value) || 0;

            const a31 = parseFloat(document.getElementById('a31').value) || 0;
            const a32 = parseFloat(document.getElementById('a32').value) || 0;
            const a33 = parseFloat(document.getElementById('a33').value) || 0;
            const b3 = parseFloat(document.getElementById('b3').value) || 0;

            // Calculer le déterminant principal
            const det = a11 * (a22 * a33 - a23 * a32) - a12 * (a21 * a33 - a23 * a31) + a13 * (a21 * a32 - a22 * a31);

            if (Math.abs(det) < 1e-10) {
                document.getElementById('cramer-result').innerHTML =
                    '<h3 style="color: #e74c3c;">❌ Erreur</h3><p>Le système n\'a pas de solution unique (déterminant = 0)</p>';
                document.getElementById('cramer-result').style.display = 'block';
                return;
            }

            // Calculer les déterminants pour X1, X2, X3
            const det1 = b1 * (a22 * a33 - a23 * a32) - a12 * (b2 * a33 - a23 * b3) + a13 * (b2 * a32 - a22 * b3);
            const det2 = a11 * (b2 * a33 - a23 * b3) - b1 * (a21 * a33 - a23 * a31) + a13 * (a21 * b3 - b2 * a31);
            const det3 = a11 * (a22 * b3 - b2 * a32) - a12 * (a21 * b3 - b2 * a31) + b1 * (a21 * a32 - a22 * a31);

            // Calculer les solutions
            const x1 = det1 / det;
            const x2 = det2 / det;
            const x3 = det3 / det;

            // Afficher les résultats
            document.getElementById('cramer-result').innerHTML = `
                <h3 style="color: #00b894;">✅ Solutions trouvées</h3>
                <p><strong>Déterminant principal (Δ) :</strong> ${det.toFixed(4)}</p>
                <div style="margin: 15px 0; padding: 15px; background: #e8f8f5; border-radius: 8px;">
                    <p><strong>x = Δ₁/Δ = </strong>${x1.toFixed(4)}</p>
                    <p><strong>y = Δ₂/Δ = </strong>${x2.toFixed(4)}</p>
                    <p><strong>z = Δ₃/Δ = </strong>${x3.toFixed(4)}</p>
                </div>
                <p><strong>Vérification :</strong></p>
                <p>${a11.toFixed(2)} × ${x1.toFixed(2)} + ${a12.toFixed(2)} × ${x2.toFixed(2)} + ${a13.toFixed(2)} × ${x3.toFixed(2)} = ${(a11 * x1 + a12 * x2 + a13 * x3).toFixed(2)} (devrait être ${b1})</p>
                <p>${a21.toFixed(2)} × ${x1.toFixed(2)} + ${a22.toFixed(2)} × ${x2.toFixed(2)} + ${a23.toFixed(2)} × ${x3.toFixed(2)} = ${(a21 * x1 + a22 * x2 + a23 * x3).toFixed(2)} (devrait être ${b2})</p>
                <p>${a31.toFixed(2)} × ${x1.toFixed(2)} + ${a32.toFixed(2)} × ${x2.toFixed(2)} + ${a33.toFixed(2)} × ${x3.toFixed(2)} = ${(a31 * x1 + a32 * x2 + a33 * x3).toFixed(2)} (devrait être ${b3})</p>
            `;
            document.getElementById('cramer-result').style.display = 'block';
        }

        // Fonctions pour le redimensionnement d'image
        function handleImageUpload(event) {
            const file = event.target.files[0];
            if (!file) return;

            document.getElementById('fileName').textContent = file.name;

            const reader = new FileReader();
            reader.onload = function (e) {
                const img = document.getElementById('resizable-img');
                img.src = e.target.result;

                // Reset sliders to image dimensions
                img.onload = function () {
                    $('#width-slider').slider('value', img.naturalWidth);
                    $('#height-slider').slider('value', img.naturalHeight);
                    document.getElementById('width-value').textContent = img.naturalWidth + 'px';
                    document.getElementById('height-value').textContent = img.naturalHeight + 'px';
                };
            };
            reader.readAsDataURL(file);
        }

        function initImageResizer() {
            // Set up image upload handler
            document.getElementById('imageUpload').addEventListener('change', handleImageUpload);
            const img = document.getElementById('resizable-img');
            const widthSlider = $('#width-slider');
            const heightSlider = $('#height-slider');

            widthSlider.slider({
                value: 400,
                min: 100,
                max: 800,
                step: 10,
                slide: function (event, ui) {
                    img.style.width = ui.value + 'px';
                    document.getElementById('width-value').textContent = ui.value + 'px';
                }
            });

            heightSlider.slider({
                value: 300,
                min: 75,
                max: 600,
                step: 10,
                slide: function (event, ui) {
                    img.style.height = ui.value + 'px';
                    document.getElementById('height-value').textContent = ui.value + 'px';
                }
            });
        }

        // Fonctions pour le panneau publicitaire
        function showLayer(index) {
            const layers = document.querySelectorAll('.layer');
            layers.forEach(layer => layer.classList.remove('active'));

            currentLayer = index;
            layers[index].classList.add('active');
        }

        function nextLayer() {
            const layers = document.querySelectorAll('.layer');
            showLayer((currentLayer + 1) % layers.length);
        }

        function startRotation() {
            stopRotation(); // Arrêter toute rotation existante
            rotationInterval = setInterval(nextLayer, rotationSpeed);
        }

        function stopRotation() {
            clearInterval(rotationInterval);
        }

        // Fonctions pour la datatable des produits
        function updateRow(input) {
            const row = input.closest('tr');
            let quantity = parseFloat(row.querySelector('td:nth-child(2) input').value) || 0;
            let price = parseFloat(row.querySelector('td:nth-child(3) input').value) || 0;

            // Forcer les valeurs négatives à 0
            quantity = Math.max(0, quantity);
            price = Math.max(0, price);

            // Mettre à jour les champs avec les valeurs corrigées
            row.querySelector('td:nth-child(2) input').value = quantity;
            row.querySelector('td:nth-child(3) input').value = price;

            const amount = quantity * price;

            row.querySelector('td:nth-child(4)').textContent = amount.toLocaleString() + ' Ar';
            updateTotals();
        }

        function addProduct() {
            const tbody = document.getElementById('productsBody');
            if (tbody.children.length >= 10) {
                alert('Maximum 10 produits autorisés');
                return;
            }

            const newRow = document.createElement('tr');
            newRow.innerHTML = `
                <td><input type="text" value="Nouveau" onchange="updateRow(this)"readonly></td>
                <td><input type="number" value="1" min="0" onchange="updateRow(this)"readonly></td>
                <td><input type="number" value="0" min="0" onchange="updateRow(this)"readonly></td>
                <td>0 Ar</td>
                <td>
                    <button onclick="editProduct(this)" class="edit-btn" title="Éditer">
                        <svg width="18" height="18" viewBox="0 0 20 20" fill="none">
                            <path d="M15.232 5.232l-10 10V17h1.768l10-10-1.768-1.768zM17.414 3.586a2 2 0 0 0-2.828 0l-1.172 1.172 2.828 2.828 1.172-1.172a2 2 0 0 0 0-2.828z"
                                stroke="#2563eb" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                    </button>
                    <button onclick="removeProduct(this)" class="delete-btn" title="Supprimer">
                        <svg width="18" height="18" viewBox="0 0 20 20" fill="none">
                            <path
                                d="M6 8V14M10 8V14M14 8V14M4 6H16M8 6V4H12V6M5 6V16C5 17.1 5.9 18 7 18H13C14.1 18 15 17.1 15 16V6"
                                stroke="#dc2626" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                    </button>
                </td>
            `;
            tbody.appendChild(newRow);
            updateTotals();
        }

        function removeProduct(button) {
            const row = button.closest('tr');
            row.remove();
            updateTotals();
        }

        function updateTotals() {
            const rows = document.querySelectorAll('#productsBody tr');
            let totalAmount = 0;
            let prices = [];
            let quantities = [];

            rows.forEach(row => {
                let quantity = parseFloat(row.querySelector('td:nth-child(2) input').value) || 0;
                let price = parseFloat(row.querySelector('td:nth-child(3) input').value) || 0;

                // Forcer les valeurs négatives à 0
                quantity = Math.max(0, quantity);
                price = Math.max(0, price);

                // Mettre à jour les champs avec les valeurs corrigées
                row.querySelector('td:nth-child(2) input').value = quantity;
                row.querySelector('td:nth-child(3) input').value = price;

                const amount = quantity * price;

                // Mettre à jour le montant affiché
                row.querySelector('td:nth-child(4)').textContent = amount.toLocaleString() + ' Ar';

                totalAmount += amount;
                quantities.push(quantity);
                if (price > 0) prices.push(price);
            });

            const totalQuantity = quantities.reduce((a, b) => a + b, 0);

            document.getElementById('totalQuantity').textContent = totalQuantity;
            document.getElementById('totalAmount').textContent = totalAmount.toLocaleString() + ' Ar';

            if (prices.length > 0) {
                const sum = prices.reduce((a, b) => a + b, 0);
                const avg = sum / prices.length;
                const min = Math.min(...prices);
                const max = Math.max(...prices);

                document.getElementById('avgPrice').value = avg.toLocaleString('fr-FR', { maximumFractionDigits: 2 }) + ' Ar';
                document.getElementById('minPrice').value = min.toLocaleString('fr-FR') + ' Ar';
                document.getElementById('maxPrice').value = max.toLocaleString('fr-FR') + ' Ar';
            } else {
                document.getElementById('avgPrice').value = '0 Ar';
                document.getElementById('minPrice').value = '0 Ar';
                document.getElementById('maxPrice').value = '0 Ar';
            }

            updateChart();
        }



        function updateChart() {
            const canvas = document.getElementById('productsChart');
            if (!canvas) return;
            const ctx = canvas.getContext('2d');
            if (!ctx) return;

            const rows = document.querySelectorAll('#productsBody tr');
            let prices = [];

            rows.forEach(row => {
                let price = parseFloat(row.querySelector('td:nth-child(3) input').value) || 0;
                if (price > 0) prices.push(price);
            });

            let min = 0, max = 0, avg = 0;
            if (prices.length > 0) {
                min = Math.min(...prices);
                max = Math.max(...prices);
                avg = prices.reduce((a, b) => a + b, 0) / prices.length;
            }

            // Utilise la variable globale productsChart
            if (productsChart) {
                productsChart.destroy();
            }

            productsChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Prix minimal', 'Prix maximal', 'Prix moyen'],
                    datasets: [{
                        label: 'Prix (Ar)',
                        data: [min, max, avg],
                        backgroundColor: [
                            '#10b981', // vert pour min
                            '#6366f1', // bleu/violet pour max
                            '#f59e42'  // orange pour moyen
                        ],
                        borderRadius: 8,
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        x: {
                            grid: { display: false },
                            ticks: { color: '#374151', font: { size: 14, weight: 'bold' } }
                        },
                        y: {
                            beginAtZero: true,
                            grid: { color: '#e5e7eb' },
                            ticks: { color: '#374151', font: { size: 13 } }
                        }
                    }
                }
            });
        }

        // Initialisation au chargement de la page
        document.addEventListener('DOMContentLoaded', function () {
            // Initialiser le redimensionneur d'image
            initImageResizer();

            // Démarrer la rotation du panneau
            startRotation();

            // Mettre à jour les totaux des produits
            updateTotals();

            // Initialize speed slider
            document.getElementById('speedSlider').addEventListener('input', function () {
                rotationSpeed = parseInt(this.value);
                document.getElementById('speedValue').textContent = (rotationSpeed / 1000) + 's';
                if (rotationInterval) {
                    stopRotation();
                    startRotation();
                }
            });
        });

        function editProduct(button) {
            const row = button.closest('tr');
            const inputs = row.querySelectorAll('input[type="text"], input[type="number"]');
            const isEditing = !inputs[0].hasAttribute('readonly');

            if (isEditing) {
                // Sauvegarder et repasser en lecture seule
                inputs.forEach(input => {
                    input.setAttribute('readonly', true);
                    input.removeEventListener('keydown', handleEditKeydown);
                });
                button.title = "Éditer";
                button.innerHTML = `<svg width="18" height="18" viewBox="0 0 20 20" fill="none">
            <path d="M15.232 5.232l-10 10V17h1.768l10-10-1.768-1.768zM17.414 3.586a2 2 0 0 0-2.828 0l-1.172 1.172 2.828 2.828 1.172-1.172a2 2 0 0 0 0-2.828z"
                stroke="#2563eb" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>`;
                updateRow(inputs[0]);
            } else {
                // Passer en mode édition
                inputs.forEach((input, idx) => {
                    input.removeAttribute('readonly');
                    input.addEventListener('keydown', handleEditKeydown);
                    input.dataset.inputIndex = idx;
                });
                inputs[0].focus();
                button.title = "Sauvegarder";
                button.innerHTML = `<svg width="18" height="18" viewBox="0 0 20 20" fill="none">
            <rect x="3" y="3" width="14" height="14" rx="2" stroke="#2563eb" stroke-width="2"/>
            <path d="M7 3v4h6V3" stroke="#2563eb" stroke-width="2"/>
            <rect x="7" y="13" width="6" height="2" rx="1" fill="#2563eb"/>
        </svg>`;
            }

            // Gestionnaire pour la touche Entrée
            function handleEditKeydown(e) {
                if (e.key === "Enter") {
                    e.preventDefault();
                    const idx = Number(this.dataset.inputIndex);
                    if (idx < inputs.length - 1) {
                        inputs[idx + 1].focus();
                    } else {
                        // Dernier champ : sauvegarder
                        button.click();
                    }
                }
            }
        }
    </script>
</body>

</html>